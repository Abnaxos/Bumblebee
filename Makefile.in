SHELL=/bin/sh
top_srcdir=@top_srcdir@
srcdir=@srcdir@
VPATH=@srcdir@

.SUFFIXES:
.SUFFIXES: .c .o

OPT=-g -O

CC=@CC@
CFLAGS=-Wall -Wextra -funsigned-char -DVERSION=@version@
LIBS=@LIBS@
INSTALL=@INSTALL@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=$(exec_prefix)/bin

# Project Files
SOURCES=bumblebeed.c bbsocket.c bbglobals.c bblogger.c bbrun.c bbswitch.c
OBJS=$(SOURCES:.c=.o)
LIB_OBJS=
DOCS=daemon.notes

# Install targets
all: bumblebeed

install: all
    $(top_srcdir)/mkinstalldirs $(bindir)
    $(INSTALL) bumblebeed $(bindir)/bumblebeed

uninstall:
    /bin/rm -f $(bindir)/bumblebeed
    for OBJ in $OBJS; do rm -f lib/$(OBJ); done

clean:
				/bin/rm -f bumblebeed
				cd libs && rm -f $(OBJS)

distclean: clean
mostlyclean: clean
maintainer-clean: clean

bumblebeed: objects
				$(CC) -o bumblebeed $(CFLAGS) $(LIBS)

objects:
				for SOURCE in $SOURCES; do
								$(CC) $(CFLAGS) $(LIBS) -c src/$(SOURCE) -o lib/$(SOURCE:.c=.o)
				done

${srcdir}/configure: configure.in aclocal.m4
				cd ${srcdir} && autoconf

${srcdir}/config.h.in: stamp-h.in
${srcdir}/stamp-h.in: configure.in aclocal.m4
				cd ${srcdir} && autoheader
				echo timestamp > ${srcdir}/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
				./config.status
Makefile: Makefile.in config.status
				./config.status
config.status: configure
				./config.status --recheck
